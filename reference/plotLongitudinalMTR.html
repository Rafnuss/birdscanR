<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>plotLongitudinalMTR — plotLongitudinalMTR • birdscanR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="plotLongitudinalMTR — plotLongitudinalMTR"><meta property="og:description" content="Plots a time series of MTR values as a bar plot. For each bar
the spread (first and third Quartile) is shown as error bars as well as the
numbers of echoes. Periods with no observation are indicated with grey,
negative bars."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">birdscanR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/mtrCalculationWorkflow.html">How to calculate Activity/Migration Traffic Rates</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/BirdScanCommunity/birdscanR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>plotLongitudinalMTR</h1>
    <small class="dont-index">Source: <a href="https://github.com/BirdScanCommunity/birdscanR/blob/main/R/plotLongitudinalMTR.R" class="external-link"><code>R/plotLongitudinalMTR.R</code></a></small>
    <div class="hidden name"><code>plotLongitudinalMTR.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Plots a time series of MTR values as a bar plot. For each bar
the spread (first and third Quartile) is shown as error bars as well as the
numbers of echoes. Periods with no observation are indicated with grey,
negative bars.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plotLongitudinalMTR</span><span class="op">(</span></span>
<span>  <span class="va">mtr</span>,</span>
<span>  <span class="va">maxMTR</span>,</span>
<span>  timeRange <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  targetTimeZone <span class="op">=</span> <span class="st">"Etc/GMT0"</span>,</span>
<span>  plotClass <span class="op">=</span> <span class="st">"allClasses"</span>,</span>
<span>  propObsTimeCutoff <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  plotSpread <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  filePath <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-mtr">mtr<a class="anchor" aria-label="anchor" href="#arg-mtr"></a></dt>
<dd><p>data frame with MTR values created by the function ‘computeMTR’.</p></dd>


<dt id="arg-maxmtr">maxMTR<a class="anchor" aria-label="anchor" href="#arg-maxmtr"></a></dt>
<dd><p>optional numeric variable, fixes the maximum value of the
y-Scale of the plot to the given value. If negative or not set, the y-Scale
is auto-scaled.</p></dd>


<dt id="arg-timerange">timeRange<a class="anchor" aria-label="anchor" href="#arg-timerange"></a></dt>
<dd><p>optional list of string vectors length 2, start and end
time of the time ranges that should be plotted. The date/time format is
“yyyy-MM-dd hh:mm”.</p></dd>


<dt id="arg-targettimezone">targetTimeZone<a class="anchor" aria-label="anchor" href="#arg-targettimezone"></a></dt>
<dd><p>"Etc/GMT0" String specifying the target time zone.
Default is "Etc/GMT0".</p></dd>


<dt id="arg-plotclass">plotClass<a class="anchor" aria-label="anchor" href="#arg-plotclass"></a></dt>
<dd><p>character string with the class of which the MTR data
should be plotted. If not set or set to “allClasses”, MTR of all classes
will be plotted.</p></dd>


<dt id="arg-propobstimecutoff">propObsTimeCutoff<a class="anchor" aria-label="anchor" href="#arg-propobstimecutoff"></a></dt>
<dd><p>numeric between 0 and 1. If the MTR is computed per
day and night, time bins with a proportional observation time smaller than
propObsTimeCutoff are ignored when combining the time bins. If the MTR is
computed for each time bin, the parameter is ignored.</p></dd>


<dt id="arg-plotspread">plotSpread<a class="anchor" aria-label="anchor" href="#arg-plotspread"></a></dt>
<dd><p>logical, choose if the spread (first and third quartile)
should be plotted.</p></dd>


<dt id="arg-filepath">filePath<a class="anchor" aria-label="anchor" href="#arg-filepath"></a></dt>
<dd><p>character string, path of the directory where the plot
should be saved. The function ‘savePlotToFile’ is used to save the plots as
png files with an auto-generated filename.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>png files stored in the directory specified with 'filePath'</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Fabian Hertner, <a href="mailto:fabian.hertner@swiss-birdradar.com">fabian.hertner@swiss-birdradar.com</a>;
Birgen Haest, <a href="mailto:birgen.haest@vogelwarte.ch">birgen.haest@vogelwarte.ch</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Set server, database, and other input settings</span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span>  <span class="va">dbServer</span>       <span class="op">=</span> <span class="st">"MACHINE\\SERVERNAME"</span> <span class="co"># Set the name of your SQL server</span></span></span>
<span class="r-in"><span>  <span class="va">dbName</span>         <span class="op">=</span> <span class="st">"db_Name"</span>               <span class="co"># Set the name of your database</span></span></span>
<span class="r-in"><span>  <span class="va">dbDriverChar</span>   <span class="op">=</span> <span class="st">"SQL Server"</span>            <span class="co"># Set either "SQL Server" or "PostgreSQL"</span></span></span>
<span class="r-in"><span>  <span class="va">mainOutputDir</span>  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"."</span>, <span class="st">"results"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">radarTimeZone</span>  <span class="op">=</span> <span class="st">"Etc/GMT0"</span></span></span>
<span class="r-in"><span>  <span class="va">targetTimeZone</span> <span class="op">=</span> <span class="st">"Etc/GMT0"</span></span></span>
<span class="r-in"><span>  <span class="va">listOfRfFeaturesToExtract</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">167</span>, <span class="fl">168</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">siteLocation</span>   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">47.494427</span>, <span class="fl">8.716432</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">sunOrCivil</span>     <span class="op">=</span> <span class="st">"civil"</span></span></span>
<span class="r-in"><span>  <span class="va">timeRangeData</span>       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2021-01-15 00:00"</span>, <span class="st">"2021-01-31 00:00"</span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="co"># Get data</span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span>  <span class="va">dbData</span> <span class="op">=</span> <span class="fu"><a href="extractDbData.html">extractDbData</a></span><span class="op">(</span>dbDriverChar                   <span class="op">=</span> <span class="va">dbDriverChar</span>,</span></span>
<span class="r-in"><span>                         dbServer                       <span class="op">=</span> <span class="va">dbServer</span>, </span></span>
<span class="r-in"><span>                         dbName                         <span class="op">=</span> <span class="va">dbName</span>, </span></span>
<span class="r-in"><span>                         saveDbToFile                   <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                         dbDataDir                      <span class="op">=</span> <span class="va">mainOutputDir</span>,</span></span>
<span class="r-in"><span>                         radarTimeZone                  <span class="op">=</span> <span class="va">radarTimeZone</span>,</span></span>
<span class="r-in"><span>                         targetTimeZone                 <span class="op">=</span> <span class="va">targetTimeZone</span>,</span></span>
<span class="r-in"><span>                         listOfRfFeaturesToExtract      <span class="op">=</span> <span class="va">listOfRfFeaturesToExtract</span>,</span></span>
<span class="r-in"><span>                         siteLocation                   <span class="op">=</span> <span class="va">siteLocation</span>, </span></span>
<span class="r-in"><span>                         sunOrCivil                     <span class="op">=</span> <span class="va">sunOrCivil</span><span class="op">)</span></span></span>
<span class="r-in"><span>                         </span></span>
<span class="r-in"><span><span class="co"># Get sunrise/sunset </span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span>  <span class="va">sunriseSunset</span> <span class="op">=</span> <span class="fu"><a href="twilight.html">twilight</a></span><span class="op">(</span>timeRange <span class="op">=</span> <span class="va">timeRangeData</span>,</span></span>
<span class="r-in"><span>                           latLon    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">47.494427</span>, <span class="fl">8.716432</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                           timeZone  <span class="op">=</span> <span class="va">targetTimeZone</span><span class="op">)</span></span></span>
<span class="r-in"><span>                          </span></span>
<span class="r-in"><span><span class="co"># Get manual blind times</span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">manualBlindTimes</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">cManualBlindTimes</span> <span class="op">=</span> <span class="va">manualBlindTimes</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Compute migration traffic rate</span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span>  <span class="va">classSelection.mtr</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"insect"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">mtrData</span> <span class="op">=</span> <span class="fu"><a href="computeMTR.html">computeMTR</a></span><span class="op">(</span>dbName                      <span class="op">=</span> <span class="va">dbName</span>, </span></span>
<span class="r-in"><span>                       echoes                      <span class="op">=</span> <span class="va">dbData</span><span class="op">$</span><span class="va">echoData</span>, </span></span>
<span class="r-in"><span>                       classSelection              <span class="op">=</span> <span class="va">classSelection.mtr</span>, </span></span>
<span class="r-in"><span>                       altitudeRange               <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">1025</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       altitudeBinSize             <span class="op">=</span> <span class="fl">50</span>,</span></span>
<span class="r-in"><span>                       timeRange                   <span class="op">=</span> <span class="va">timeRangeData</span>, </span></span>
<span class="r-in"><span>                       timeBinDuration_sec         <span class="op">=</span> <span class="fl">1800</span>,</span></span>
<span class="r-in"><span>                       timeZone                    <span class="op">=</span> <span class="va">targetTimeZone</span>,</span></span>
<span class="r-in"><span>                       sunriseSunset               <span class="op">=</span> <span class="va">sunriseSunset</span>,</span></span>
<span class="r-in"><span>                       sunOrCivil                  <span class="op">=</span> <span class="st">"civil"</span>,</span></span>
<span class="r-in"><span>                       protocolData                <span class="op">=</span> <span class="va">dbData</span><span class="op">$</span><span class="va">protocolData</span>, </span></span>
<span class="r-in"><span>                       visibilityData              <span class="op">=</span> <span class="va">dbData</span><span class="op">$</span><span class="va">visibilityData</span>,</span></span>
<span class="r-in"><span>                       manualBlindTimes            <span class="op">=</span> <span class="va">cManualBlindTimes</span>,</span></span>
<span class="r-in"><span>                       saveBlindTimes              <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                       blindTimesOutputDir         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       blindTimeAsMtrZero          <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                       propObsTimeCutoff           <span class="op">=</span> <span class="fl">0</span>, </span></span>
<span class="r-in"><span>                       computePerDayNight          <span class="op">=</span> <span class="cn">FALSE</span>, </span></span>
<span class="r-in"><span>                       computeAltitudeDistribution <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make Plot </span></span></span>
<span class="r-in"><span><span class="co"># ===========================================================================</span></span></span>
<span class="r-in"><span>  <span class="va">timeRangePlot</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2021-01-15 00:00"</span>, <span class="st">"2021-01-22 00:00"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2021-01-23 00:00"</span>, <span class="st">"2021-01-31 00:00"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">plotExplorationplotLongitudinalMTR</span><span class="op">(</span>mtr               <span class="op">=</span> <span class="va">mtrData</span>, </span></span>
<span class="r-in"><span>                                     maxMTR            <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, </span></span>
<span class="r-in"><span>                                     timeRange         <span class="op">=</span> <span class="va">timeRangePlot</span>,</span></span>
<span class="r-in"><span>                                     targetTimeZone    <span class="op">=</span> <span class="st">"Etc/GMT0"</span>,</span></span>
<span class="r-in"><span>                                     plotClass         <span class="op">=</span> <span class="st">"allClasses"</span>,</span></span>
<span class="r-in"><span>                                     propObsTimeCutoff <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>                                     plotSpread        <span class="op">=</span> <span class="cn">TRUE</span>, </span></span>
<span class="r-in"><span>                                     filePath          <span class="op">=</span> <span class="st">"./"</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Birgen Haest, Fabian Hertner.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

